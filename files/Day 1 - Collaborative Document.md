![](https://i.imgur.com/iywjz8s.png)


# Day 1 - Collaborative Document
2023-10-03 Good Practices in Research Software (2023-10-02-ds-cr)

Welcome to The Workshop Collaborative Document.

This Document is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents.

----------------------------------------------------------------------------

This is the Document for today: [link](https://codimd.carpentries.org/qctl8zmsSgKwpTzATXTp2Q?both)

Collaborative Document day 1: [link](https://codimd.carpentries.org/qctl8zmsSgKwpTzATXTp2Q?both)

Collaborative Document day 2: [link](https://codimd.carpentries.org/SIGfo1wqReec2P-zc_YPmQ?both)

## üëÆCode of Conduct

Participants are expected to follow those guidelines:

* Use welcoming and inclusive language
* Be respectful of different viewpoints and experiences
* Gracefully accept constructive criticism
* Focus on what is best for the community
* Show courtesy and respect towards other community members

For more details, see [here](https://docs.carpentries.org/topic_folders/policies/code-of-conduct.html).

Want to report a Code of Conduct incident and you prefer to do it anonymously? You can do it [here](https://goo.gl/forms/KoUfO53Za3apOuOK2).

## ‚öñÔ∏è License

All content is publicly available under the Creative Commons Attribution License: [creativecommons.org/licenses/by/4.0/](https://creativecommons.org/licenses/by/4.0/).

## üôãGetting help

To ask a question, just raise your hand.

If you need help from a helper, place a pink post-it note on your laptop lid. A helper will come to assist you as soon as possible.

## üñ• Workshop website
For information about this workshop, agenda and setup.
[https://esciencecenter-digital-skills.github.io/2023-10-03-ds-cr/](https://esciencecenter-digital-skills.github.io/2023-10-03-ds-cr/)

## üõ† Setup
We will assume everyone can access the command line on their laptop and managed to follow these [**setup instructions**](https://esciencecenter-digital-skills.github.io/2023-10-03-ds-cr/#:~:text=the%20CET%20timezone.-,Setup,-To%20participate%20in).

Please put a pink post-it note on you laptop lid, if you need a bit more help with the setup. 


## üë©‚Äçüè´üë©‚Äçüíªüéì Instructors

Jaro Camphuijsen, Giulia Crocioni, Olga Lyashevska

## üßë‚Äçüôã Helpers

Carlos Murilo Romero Rocha

## üë©‚Äçüíªüë©‚Äçüíºüë®‚Äçüî¨üßë‚Äçüî¨üßë‚ÄçüöÄüßô‚Äç‚ôÇÔ∏èüîß Roll Call
Name/ pronouns (optional) / job, role / social media (twitter, github, ...) / background or interests (optional) / city


## üóìÔ∏è Agenda

|  Time | Topic                             |
| -----:|:--------------------------------- |
| 09:30 | Welcome and icebreaker            |
| 09:45 | Workshop Introduction             |
| 10:00 | Version control with Git          |
| 10:30 | **Coffee break**                  |
| 10:45 | Version control with Git          |
| 11:30 | **Coffee break**                  |
| 11:45 | Version control with Git          |
| 12:30 | **Lunch Break**                   |
| 13:30 | Collaboration with Git and GitHub |
| 14:15 | **Coffee break**                  |
| 14:30 | Collaboration with Git and GitHub |
| 15:15 | **Coffee break**                  | 
| 15:30 | Collaboration with Git and GitHub |
| 16:15 | Wrap-up                           |
| 16:30 | END                               |
	


## üè¢ Location logistics
* Coffee and toilets are in the hallway, just outside of the classroom.
* If you leave the building, 
  be sure to be accompanied by someone from the escience center to let you back in through the groundfloor door
* For access to this floor you might need to ring the doorbell so someone can let you in
* In case of an emergency, you can exit our floor using the main staircase.
  Or follow green light signs at the ceiling to the emergency staircase.
* **Wifi**: Eduroam should work. Otherwise use the 'matrixbuilding' network, password should be printed out and available somewhere in the room.

## üéì Certificate of attendance
If you attend the full workshop you can request a certificate of attendance by emailing to training@esciencecenter.nl .

## ‚ùÑÔ∏è Icebreaker
Do or describe your favorite dance move!

## üßë‚Äçüíª üè¢About the eScience Center
www.esciencecenter.nl

Especially check our [calls for proposals](https://www.esciencecenter.nl/calls-for-proposals/) and [fellowship programme](https://www.esciencecenter.nl/fellowship-programme/)!

## üîß Exercises
If you are done with your exercise, or know the answer to a question, put the green post-it note on top of your laptop lid

#### 1. Which command(s) below would save the changes of myfile.txt to my local Git repository?

1. `git commit -m "my recent changes"`
2. `git init myfile.txt`
   `git commit -m "my recent changes"`
3. `git add myfile.txt`
   `git commit -m "my recent changes"`
4. `git commit -m myfile.txt "my recent changes"`


#### 2. Committing Multiple Files
Remember that the staging area can hold changes from any number of files that you want to commit as a single snapshot.

1. Add some text to ``mars.txt`` noting your decision to consider Venus as a base
2. Create a new file ``venus.txt`` with your initial thoughts about Venus as a base for you and your friends
3. Add changes from both files to the staging area, and commit those changes.


#### 3. GitHub GUI exercise

Browse to your `planets` repository on GitHub. Under the Code tab, find and click on the text that says ‚ÄúXX commits‚Äù (where ‚ÄúXX‚Äù is some number). Hover over, and click on, the three buttons to the right of each commit. What information can you gather/explore from these buttons? How would you get that same information in the shell?

#### 4. Working as a project collaborator (in pairs)

Do this exercise in pairs.

#### Part 1
- PERSON A: Create an issue in the repository
- PERSON B: Clone this repository to your system
- PERSON B: Create a new branch
- PERSON B: Make the changes requested in the issue
- PERSON B: Push the changes to the remote repository on GitHub
- PERSON B: submit a Pull Request, refer to the issue (e.g. "Closes #1")

#### Part 2
- PERSON A: review the Pull Request
- PERSON B: address the comments
- PERSON A: approve the Pull Request
- PERSON B: merge the Pull Request

#### 5. Working as an external contributor (in pairs)

#### Part 1
- PERSON A: Create an issue in Person B's repository
- PERSON A: Fork the repository to their own (= Person A's) account
- PERSON A: Clone the repository, make changes, push them back to the fork
- PERSON A: Submit a Pull Request from the fork to the original repository

#### Part 2
- PERSON B: Make a change in the original repository in the same place as person A's proposed changes
- PERSON A: Solve the merge conflict in the Pull Request
- PERSON B: Review/Approve the Pull Request
- PERSON B: merge the Pull Request

## üß† Collaborative Notes

### 1. Good Practices in Software Engineering 
#### Programming vs Software engineer

![](https://codimd.carpentries.org/uploads/upload_9cf8e6fe5773a928a6a4eb5d95789be7.png)


- Software engineering is programming integrated over time!
- The use of software engineering best practices (despite an initial overhead) makes your project speed up over time
- Examples of best practices are:
    - version control
    - modular code
    - documentation
    - code reviews
    - automate testing
- These good practices are investiments that make your code development more efficient, reproducible, reusable, faster to debug with fewer errors

### 2. Introduction to Git
#### Why version control?
![Why version control](https://phdcomics.com/comics/archive/phd101212s.gif)

- Version control is track changes on steroids.
- Version control is an unlimited undo.
- Version control also allows many people to work in parallel
- In Git, every change made can be saved (and recorded in the history of your project!) and is referred to as a `commit`
#### Setting up Git
Setup your name and email:
```bash
git config --global user.name "My Name"
```
```bash
git config --global user.email "me@example.com"
```
Setup your default text editor as `nano`:
```bash
git config --global core.editor "nano -w"
```
Setup the default branch as the `main` branch:
```bash
git config --global init.defaultBranch main
```
Check the global options of your git:
```bash
git config --global --edit
```
```bash
git config --global --list
```
Check all options available in git 
```bash
git config -h
```
General help:
```bash
git help
```
#### Version control in practice
Go to your desktop:
```bash
cd ~/Desktop
```
Make a new directory:
```bash
mkdir planets
```
Go to that directory:
```bash
cd planets
```
To check where you are:
```bash
pwd # e.g., /home/john/Desktop/planet
```
Initialise a new git project:
```bash
git init
```
Check the contents of your directory:
```bash
ls
```
List also "hidden" folders like `.git`:
```bash
ls -a
```
Check the status of your git repo:
```bash
git status
```
Make a subdirectory named `moons` and go inside it:
```bash
mkdir moons
cd moons
```
In case you have initiated a git inside `moons` and want to not do so:
```bash
rm -rf .git
```
Go back to the `planets` directory:
```bash
cd ..
```
Use `nano` to create a file
```bash
nano mars.txt
```
Enter the following text:
```
Cold and dry, but everything is my favorite color
```
See if the text was written to the file correctly:
```bash
cat mars.txt
```
Check that you have one untracked file:
```bash
git status
```
Track the untracked file:
```bash
git add mars.txt
```
Commit the `mars.txt` file:
```bash
git commit -m "start notes on Mars as a base"
```
Check that you have committed the file correctly:
```bash
git status
```
Check the details of your commits:
```bash
git log
```
this also give you unique identifiers and details of each commit made.
We will make more changes:
```bash
nano mars.txt
```
Add the following line
```
The two moons may be a problem for Wolfman
```
Show the changes between the previously committed `mars.txt` file and the current one (not committed yet):
```bash
git diff
```
Commit once again the changes in the `mars.txt` file:
```bash
git add mars.txt
git commit -m "updates on mars"
```
Edit the file again:
```bash
nano mars.txt
```
Add one more line
```
But the Mummy will appreciate the lack of humidity
```
Add the file to the staging area:
```bash
git add mars.txt
```
Check the difference between the previusly committed file and the newly committed `mars.txt`
```bash
git diff --staged
```
Now commit the changes:
```bash
git commit -m "add concerns regarding mummy"
```
Check that everything is OK:
```bash
git status
```
Check the details of your commits:
```bash
git log
```
Check the details of your last `n` commits:
```bash
git log -n # e.g., for the last two commits, "git log -2"
```
Clean the terminal
```bash
clear
```
Clear what is inside `moons`
```bash
ls moons
```
Add a file inside `moon`
```bash
touch moons/apollo-11 moons/sputnik-1
```
Check once again the status:
```bash
git status
```
Create a `.gitkeep` file
```bash
nano .gitkeep
```
this will track empt directories like `moons`

Add all edited files at the same time to the stage areas
```bash
git add .
```

#### The Holy Realms of Git: How to dig into the history of your project ?

Adding one more change to `mars.txt`
```bash
nano mars.txt
```
add to `mars.txt`, e.g., 
```bash
"An ill-considered change"
```
Check the difference in `mars.txt` between the last commit and the current file
```bash
git diff HEAD mars.txt
```
To go back even further in history and check differences:
```bash
git diff HEAD~2 mars.txt
```
Show the changes and also more details of the commit:
```bash
git show HEAD~3 mars.txt
```
You can also use the unique commit identifiers and inquire the changes:
```bash
git diff 51dfb2dcbefbab8876d940f15baae674e6288366 mars.txt
```
Compare between previous commits:
```bash
git diff 51dfb...08ddf0
```
Restore the branch to previous states (using unique commit identifiers)
```bash
git checkout 51dfb
```
Restore back to the main branch and the original state:
```bash
git checkout main
```
Make a directory called `output` and create some files
```bash
mkdir output
touch output/out.csv output/out2.csv log.txt
```
To ignore and do not track these files
```bash
nano .gitignore
```
add to `.gitignore`: 
```bash
output
log.*
```
This will ignore the changes of the `output` folder and any `log.*` file
Add `.gitignore` file to our repo
```bash
git add .gitignore
git commit -m "Added .gitignore"
```

### 3. Collaboration with git and Github

#### Create a new repository on github
1. Open a browser and navigate to github.com.
2. In the top right corner, click the "+" and then "New repository".
3. Give your repository a name (it is common practice to give it the same name as your folder, but this is not mandatory).
4. Make it Public and completely empty.

#### Populating the repository
GitHub will show you 3 options of how to populate the repository:
![](https://codimd.carpentries.org/uploads/upload_9908b762142cebb1de9924d597b187e0.png)

We will use the second option (push an existing repository from the command line).
To push your existing local repo to remote, do:
```bash
git remote add origin git@github.com:XXX/planets.git
git remote -v
git push origin main
```
This connects your local repository to the repository on github.com

#### Working as a project collaborator - typical workflow:
1. Add people as your collaborators so that they can work together with you in our project. 
2. In case you need them to take care of some changes/issues, create an `issue` in GitHub and assign a specific collaborator to work on it. 
3. Your collaborator should first make a new branch before anything, and them start working on this new feature.
4. Once changes are done, your collaborator will `push` them into the GitHub remote repository and then create a `pull request` describing all details of the changes made. He/she will also associate this `pull request` with the `issue #` you previously generated.
6. You will then `review` the `pull request`. You can suggest further changes, make comments, give feedback, etc. If everything is OK, you will then `merge` this branch into the `main` working branch.

**remember**: it is considered a bad practice to any push changes directly into the `main` branch.
    
To update your local repo with any changes made in the remote repository, use:
```bash
git pull
```
This command is exactly the oposite of `git push` we saw before.

#### Working as an external contributor (in pairs) - typical workflow:

1. This is the case when you want to contribute to very large projects like `numpy`, `scipy`, `tensorflow`, wherein your are not a collaborator. 
2. You can go to the GitHub page of the package you want to contribute to and then `fork` this repository into your own GitHub account. With this you have a "local" copy of it, allowing you to make "experiments" without affecting the original project.
3. You `clone` this `forked` repository in your local pc.
4. From the original repo, you choose an `issue` you wish to contribute with.
5. Now, in your local repo, you make a new `branch` inside which you are about to work on the changes. 
6. After all the changes done, proceed as before and `push` the local changes into your 'forked' remote repository.
7. You can now make a `pull request` that points to the original repository.
8. This `pull request` will be `reviewed` by somebody else directly associated with this package (e.g., a maintainer). He/She will eventually approve your changes into the `main` repo of that package. 
    
## Feedback 
### How is the pace?
Can you let us know how you think the pacing of the workshop is? Add an "x" to the answer of you choice.

Too fast: X
Perfect: xxxxxxxxx
Too slow: xxxxxxxxxxxx

### Tips

- When we have to wait for a little bit so everyone is setup correctly maybe give us some resources or small exercises to look at +1
- a couple of times it happened to get lost when following in terminal, maybe just pause 10 secs to ask if everyone is still there +1
- describe what is being clicked when clicking, e.g. "the button with the squares" (in case we're typing instead of looking at that moment) +1
- The pace was quite fast as soon as we moved to Github. I feel people could follow though, so I don't think it was not too fast for (most of the) the group. But maybe you can ping a bit more if everyone can follow?
- A little section on the (honestly very confusing) naming scheme on Git and Github would have been nice (why on earth is it called a "Pull request"?). Also a lot of people are using Gitlab, so it would have been nice to mention the differences between the two.
- Github (and Gitlab) offers a more direct way of linking an issue to a branch and that pranch to a PR. Maybe mention that as well?
- Sometimes some of the helpers where doing stuff on their laptops while people had questions during exercises. So people had to wait for Jaro to answer someone else's question first. Maybe that was intentional though, just one thing I noticed. üòá
- The iceberaker was great, cute and innovative! I think it might be better though to give people a clearer choice to skip the icebreaker dance if they feel uncomfortable doing so to avoid group pressure.

### Tops
- Exercises were perfect +1
- great group work tasks  +1
- dancing icebreaker +1 (please no more)
- like the info for the collaboration with git    
- a lot of people to ask help
- good amount of reminders via email for the prep needed for the workshop and nice to have a timeslot to zoom for questions +1
- interactive learning really works!
- You guys are incerdible knowledgeable! ‚ô•
- I liked the "open" discussions on controversial topics that still gave concrete guidance on what to do in practice (referring to the discussion on why whe need to stage changes). I've been to so many courses that just tell you "just do whatever works for you", which sounds nice and inclusive, but is actually not very actonable when you are still learning. I feel you really gave actionable advice though!

## üìö Resources

- [Workshop slides](https://nlesc-slides.github.io/2023-06-19-ds-cr)
- [Lesson github repository](https://github.com/esciencecenter-digital-skills/good-practices-in-research-software-development) This is where you can open an issue to give your feedback and improvements on the teaching materials.
- [CodeRefinery](https://coderefinery.org/) (awesome materials and more workshops on research software)
- [Upcoming workshops](https://www.esciencecenter.nl/events/?f=workshops) (more workshops)
- [Newsletter](https://esciencecenter.us8.list-manage.com/subscribe?u=a0a563ca342f1949246a9f92f&id=31bfc2303d) (if you like to stay up to date)
- [Atomic commit](https://blog.esciencecenter.nl/the-utopic-git-history-d44b81c09593) (A nice blogpost about atomic commits by our colleague)
- [Git cheat sheet](https://education.github.com/git-cheat-sheet-education.pdf) (Most useful git commands together in one place)
- [Git teaching materials](https://swcarpentry.github.io/git-novice) (We taught the first 7 episodes of this material. The other episodes are also very interesting to study but we will not go over them in this workshop.)